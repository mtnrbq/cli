#!/usr/bin/env python3

import click
from webfpga_lib.Synthesis import Synthesize

@click.group()
def cli():
    print("WebFPGA CLI v0.1\n")

# Synthesize
@cli.command()
@click.option("-o", "--output", default="output.bin", help="Bitstream filename", type=click.File("wb"))
@click.argument("input_verilog", nargs=-1, required=True, type=click.File("r"))
def synth(output, input_verilog):
    """Synthesize one or more input Verilog files and save the bitstream"""
    Synthesize(input_verilog=input_verilog, output_bitstream=output)

# Flash
@cli.command()
@click.argument("bitstream", required=True, type=click.File("rb"))
def flash(bitstream):
    """Flash the first connected WebFPGA device"""
    click.echo("Flashing bitstream")

cli()
